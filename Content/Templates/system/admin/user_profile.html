<include file="layout@admin@head"/>
<link href="{:ADMIM_TPL_PATH}/plugins/jquery-image-cut/dist/cropper.css" rel="stylesheet" type="text/css"/>
<link href="{:ADMIM_TPL_PATH}/plugins/jquery-image-cut/css/main.css" rel="stylesheet" type="text/css"/>
<link href="{:ADMIM_TPL_PATH}/plugins/jquery-image-cut/css/normalize.css" rel="stylesheet" type="text/css"/>
<link href="{:ADMIM_TPL_PATH}/plugins/jquery-image-cut/css/default.css" rel="stylesheet" type="text/css"/>


<!-- BEGIN CONTAINER -->
<div class="page-container">
<!-- BEGIN SIDEBAR -->
<div class="page-sidebar-wrapper">
    <!-- DOC: Set data-auto-scroll="false" to disable the sidebar from auto scrolling/focusing -->
    <!-- DOC: Change data-auto-speed="200" to adjust the sub menu slide up/down speed -->

    <include file="layout@layout@menu"/>


</div>
<!-- END SIDEBAR -->
<!-- BEGIN CONTENT -->
<div class="page-content-wrapper">
<div class="page-content">
<include file="layout@layout@widgets"/>

<div class="row">
<div class="col-md-12">


<div class="container">
<div class="row">
    <div class="col-md-9">
        <!-- <h3 class="page-header">Demo:</h3> -->
        <div class="img-container">
            <img src="{$avatar}" alt="Picture">
            <input type="hidden" id="avatarToken" value="{$token}">
        </div>
    </div>
    <div class="col-md-3">
        <!-- <h3 class="page-header">Preview:</h3> -->
        <div class="docs-preview clearfix">
            <div class="img-preview preview-lg"></div>
            <div class="img-preview preview-md"></div>
            <div class="img-preview preview-sm"></div>
            <div class="img-preview preview-xs"></div>
        </div>

        <!-- <h3 class="page-header">Data:</h3> -->
        <div class="docs-data">
            <div class="input-group">
                <label class="input-group-addon" for="dataX">X</label>
                <input class="form-control" id="dataX" type="text" placeholder="x">
                <span class="input-group-addon">px</span>
            </div>
            <div class="input-group">
                <label class="input-group-addon" for="dataY">Y</label>
                <input class="form-control" id="dataY" type="text" placeholder="y">
                <span class="input-group-addon">px</span>
            </div>
            <div class="input-group">
                <label class="input-group-addon" for="dataWidth">Width</label>
                <input class="form-control" id="dataWidth" type="text" placeholder="width">
                <span class="input-group-addon">px</span>
            </div>
            <div class="input-group">
                <label class="input-group-addon" for="dataHeight">Height</label>
                <input class="form-control" id="dataHeight" type="text" placeholder="height">
                <span class="input-group-addon">px</span>
            </div>
            <div class="input-group">
                <label class="input-group-addon" for="dataRotate">Rotate</label>
                <input class="form-control" id="dataRotate" type="text" placeholder="rotate">
                <span class="input-group-addon">deg</span>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-9 docs-buttons">
        <!-- <h3 class="page-header">Toolbar:</h3> -->
        <div class="btn-group">
            <button class="btn btn-primary" data-method="setDragMode" data-option="move" type="button" title="移动">
            <span class="docs-tooltip" data-toggle="tooltip" title="移动">
              <span class="icon icon-move"></span>
            </span>
            </button>
            <button class="btn btn-primary" data-method="setDragMode" data-option="crop" type="button" title="裁切 ">
            <span class="docs-tooltip" data-toggle="tooltip" title="裁切 ">
              <span class="icon icon-crop"></span>
            </span>
            </button>
            <button class="btn btn-primary" data-method="zoom" data-option="0.1" type="button" title="放大">
            <span class="docs-tooltip" data-toggle="tooltip" title="放大">
              <span class="icon icon-zoom-in"></span>
            </span>
            </button>
            <button class="btn btn-primary" data-method="zoom" data-option="-0.1" type="button" title="缩小">
            <span class="docs-tooltip" data-toggle="tooltip" title="缩小">
              <span class="icon icon-zoom-out"></span>
            </span>
            </button>
            <button class="btn btn-primary" data-method="rotate" data-option="-45" type="button" title="向左旋转">
            <span class="docs-tooltip" data-toggle="tooltip" title="向左旋转">
              <span class="icon icon-rotate-left"></span>
            </span>
            </button>
            <button class="btn btn-primary" data-method="rotate" data-option="45" type="button" title="向右旋转">
            <span class="docs-tooltip" data-toggle="tooltip" title="向右旋转">
              <span class="icon icon-rotate-right"></span>
            </span>
            </button>
        </div>

        <div class="btn-group">
            <button class="btn btn-primary" data-method="disable" type="button" title="禁用">
            <span class="docs-tooltip" data-toggle="tooltip" title="禁用">
              <span class="icon icon-lock"></span>
            </span>
            </button>
            <button class="btn btn-primary" data-method="enable" type="button" title="启用">
            <span class="docs-tooltip" data-toggle="tooltip" title="启用">
              <span class="icon icon-unlock"></span>
            </span>
            </button>
            <button class="btn btn-primary" data-method="clear" type="button" title="清除">
            <span class="docs-tooltip" data-toggle="tooltip" title="清除">
              <span class="icon icon-remove"></span>
            </span>
            </button>
            <button class="btn btn-primary" data-method="reset" type="button" title="重置">
            <span class="docs-tooltip" data-toggle="tooltip" title="重置">
              <span class="icon icon-refresh"></span>
            </span>
            </button>
            <label class="btn btn-primary btn-upload" for="inputImage" title="上传图片">
                <input class="sr-only" id="inputImage" name="file" type="file" accept="image/*">
            <span class="docs-tooltip" data-toggle="tooltip" title="上传图片">
              <span class="icon icon-upload"></span>
            </span>
            </label>
            <button class="btn btn-primary" data-method="destroy" type="button" title="撤销">
            <span class="docs-tooltip" data-toggle="tooltip" title="撤销">
              <span class="icon icon-off"></span>
            </span>
            </button>
        </div>

        <div class="btn-group btn-group-crop">
            <button class="btn btn-primary" data-method="getCroppedCanvas" type="button">
            <span class="docs-tooltip" data-toggle="tooltip" title="预览">
              预览
            </span>
            </button>

            <button class="btn btn-primary" data-method="getCroppedCanvas"
                    data-option="{ &quot;width&quot;: 320, &quot;height&quot;: 180 }" type="button">
            <span class="docs-tooltip" data-toggle="tooltip" title="预览320 &times; 180">
              预览320 &times; 180
            </span>
            </button>

            <button class="btn btn-primary" data-method="getCroppedCanvas"
                    data-option="{ &quot;width&quot;: 160, &quot;height&quot;: 90 }" type="button">
            <span class="docs-tooltip" data-toggle="tooltip" title="预览160 &times; 90">
              预览160 &times; 90
            </span>
            </button>

        </div>


        <!-- Show the cropped image in modal -->
        <div class="modal fade docs-cropped" id="getCroppedCanvasModal" aria-hidden="true"
             aria-labelledby="getCroppedCanvasTitle" role="dialog" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button class="close" data-dismiss="modal" type="button" aria-hidden="true">&times;</button>
                        <h4 class="modal-title" id="getCroppedCanvasTitle">Cropped</h4>
                    </div>
                    <div class="modal-body"></div>
                    <!-- <div class="modal-footer">
                      <button class="btn btn-primary" data-dismiss="modal" type="button">Close</button>
                    </div> -->
                </div>
            </div>
        </div>
        <!-- /.modal -->


    </div>
    <!-- /.docs-buttons -->

    <div class="col-md-3 docs-toggles">
        <!-- <h3 class="page-header">Toggles:</h3> -->
        <div class="btn-group btn-group-justified" data-toggle="buttons">
            <label class="btn btn-primary active" data-method="setAspectRatio" data-option="1.7777777777777777"
                   title="Set Aspect Ratio">
                <input class="sr-only" id="aspestRatio1" name="aspestRatio" value="1.7777777777777777" type="radio">
            <span class="docs-tooltip" data-toggle="tooltip" title="">
              16:9
            </span>
            </label>
            <label class="btn btn-primary" data-method="setAspectRatio" data-option="1.3333333333333333"
                   title="Set Aspect Ratio">
                <input class="sr-only" id="aspestRatio2" name="aspestRatio" value="1.3333333333333333" type="radio">
            <span class="docs-tooltip" data-toggle="tooltip" title="">
              4:3
            </span>
            </label>
            <label class="btn btn-primary" data-method="setAspectRatio" data-option="1" title="Set Aspect Ratio">
                <input class="sr-only" id="aspestRatio3" name="aspestRatio" value="1" type="radio">
            <span class="docs-tooltip" data-toggle="tooltip" title="">
              1:1
            </span>
            </label>
            <label class="btn btn-primary" data-method="setAspectRatio" data-option="0.6666666666666666"
                   title="Set Aspect Ratio">
                <input class="sr-only" id="aspestRatio4" name="aspestRatio" value="0.6666666666666666" type="radio">
            <span class="docs-tooltip" data-toggle="tooltip" title="">
              2:3
            </span>
            </label>
            <label class="btn btn-primary" data-method="setAspectRatio" data-option="NaN" title="Set Aspect Ratio">
                <input class="sr-only" id="aspestRatio5" name="aspestRatio" value="NaN" type="radio">
            <span class="docs-tooltip" data-toggle="tooltip" title="">
              Free
            </span>
            </label>
        </div>

        <div class="dropdown dropup docs-options">

            <button class="btn btn-primary" data-method="saveData" data-option="" style="width: 260px;"
                    data-target="#putData" type="button">
          <span class="docs-tooltip" data-toggle="tooltip" title="保存">
            保存
          </span>
            </button>

        </div>


        <!-- /.dropdown -->
    </div>
    <!-- /.docs-toggles -->
</div>
</div>


</div>

<div class="col-md-12 ">
    <div class="portlet-body form">
        {$memberform->begin('info')}
        <div class="form-body">

            <div class="form-group">


                <div class="clearfix">
                </div>

            </div>
            <div class="form-group" style="margin-top: 50px"></div>

            <div class="form-group">
                {$memberform->getText('avatar')}
            </div>

            <div class="form-group">
                {$memberform->getText('nickname')}
            </div>

            <div class="form-group">
                {$memberform->getSelect('sex')}
            </div>

            <div class="form-group">
                {$memberform->getText('email')}
            </div>

            <div class="form-group">
                {$memberform->getText('profession')}
            </div>

            <div class="form-group">
                {$memberform->getText('favorite')}
            </div>

            <div class="form-group">
                {$memberform->getText('userinfo')}
            </div>

        </div>
        <div class="form-actions">
            <div class="row">
                <div class="col-md-offset-5 col-md-9">
                    <button type="submit" class="btn green">Submit</button>
                    <button type="button" class="btn default">Cancel</button>
                </div>
            </div>
        </div>

        {$memberform->end('info')}
    </div>
</div>
</div>
<div class="clearfix">
</div>

</div>
</div>


</div>
<!-- END CONTAINER -->


<include file="layout@admin@foot"/>

<script type="text/javascript" src="{:ADMIM_TPL_PATH}/plugins/jquery-image-cut/dist/cropper.js"></script>
<script src="{:ADMIM_TPL_PATH}/plugins/jquery-image-cut/js/main.js" type="text/javascript"></script>

<script>


    $().cropper.saveData = function () {
        var canvas = this.getCroppedCanvas();
        $.ajax({
            url: "/index.php?m=admin&c=user&a=avatarupload",
            data: {
                data: canvas.toDataURL()
                //timestamp:
            },
            type: "post",
            'timestamp': '{:time()}',
            'token': '{:md5("unique_salt_xtt".time())}'
        })

    },

</script>

